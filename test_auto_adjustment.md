# 网络最大值自动调整功能测试

## 🎯 功能说明

当用户在前端设置网络最大值（net_up_max 或 net_down_max）小于1时，系统会自动将其调整为2000 Mbps。

## 📋 测试用例

### 用例1: 上行最大值设置为0.5
- **输入**: net_up_max = 0.5
- **期望**: 前端发送给后端 net_up_max = 2000
- **UI提示**: 显示 "ℹ️ 小于1将自动设置为2000 Mbps"

### 用例2: 下行最大值设置为0.8
- **输入**: net_down_max = 0.8
- **期望**: 前端发送给后端 net_down_max = 2000
- **UI提示**: 显示 "ℹ️ 小于1将自动设置为2000 Mbps"

### 用例3: 设置为0（特殊情况）
- **输入**: net_up_max = 0
- **期望**: 前端发送给后端 net_up_max = 0（不调整）
- **UI提示**: 显示 "⚠️ 当前为0，不会检查上行网络负载"

### 用例4: 设置为1或更大
- **输入**: net_up_max = 100
- **期望**: 前端发送给后端 net_up_max = 100（不调整）
- **UI提示**: 无特殊提示

### 用例5: 混合情况
- **输入**: net_up_max = 0.3, net_down_max = 150
- **期望**: 前端发送 net_up_max = 2000, net_down_max = 150
- **UI提示**: 上行显示调整提示，下行无提示

## 🔧 实现细节

### 前端处理逻辑
```typescript
const processedThreshold = {
  ...threshold,
  net_up_max: threshold.net_up_max < 1 ? 2000 : threshold.net_up_max,
  net_down_max: threshold.net_down_max < 1 ? 2000 : threshold.net_down_max,
};
```

### UI 动态提示逻辑
```typescript
// 零值提示（优先级更高）
{threshold.net_up_max === 0 && (
  <span className="warning-text"> ⚠️ 当前为0，不会检查上行网络负载</span>
)}

// 小于1的调整提示
{threshold.net_up_max > 0 && threshold.net_up_max < 1 && (
  <span className="info-text"> ℹ️ 小于1将自动设置为2000 Mbps</span>
)}
```

## ✅ 验证方法

1. **前端验证**: 
   - 在浏览器控制台查看 `console.log` 输出
   - 检查发送给后端的实际数据

2. **后端验证**:
   - 查看数据库中保存的实际值
   - 确认负载判断逻辑使用正确的阈值

3. **用户体验验证**:
   - UI 提示是否准确显示
   - 保存后数据是否符合预期

## 🎨 用户界面状态

### 输入框显示值 vs 实际发送值
- **显示**: 用户输入的原始值（如 0.5）
- **发送**: 自动调整后的值（如 2000）
- **提示**: 清晰说明会发生什么调整

### 颜色编码
- **橙色 (warning-text)**: 重要警告（如设置为0）
- **蓝色 (info-text)**: 信息提示（如自动调整）

## 🚀 实际效果

用户设置小于1的网络最大值时：
1. 输入框仍显示用户输入的值
2. 下方显示蓝色提示信息
3. 保存时自动转换为2000发送给后端
4. 控制台显示调整日志
5. 数据库中存储的是2000

这样既保持了用户输入的透明度，又确保了系统的合理性。